
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>lossmodel &#8212; gemact</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="canonical" href="https://github.com/GEM-analytics/gemact/_modules/lossmodel.html" />
    <link rel="shortcut icon" href="../_static/webtab.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/GEMActlogo.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   GEMAct
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Table of Contents
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../usage.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../api.html">
   API reference guide
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com//GEM-analytics"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1></h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                    </div>
                </div>
            </div>
            
              <div>
                
  <h1>Source code for lossmodel</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">distributions</span>
<span class="kn">import</span> <span class="nn">helperfunctions</span> <span class="k">as</span> <span class="nn">hfns</span>
<span class="c1"># import logging</span>
<span class="kn">from</span> <span class="nn">twiggy</span> <span class="kn">import</span> <span class="n">quick_setup</span><span class="p">,</span><span class="n">log</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="c1"># from scipy import stats,special</span>
<span class="kn">from</span> <span class="nn">scipy.fft</span> <span class="kn">import</span> <span class="n">fft</span><span class="p">,</span> <span class="n">ifft</span>
<span class="c1"># from scipy.stats import qmc</span>
<span class="c1"># from datetime import datetime</span>

<span class="c1"># from statsmodels.distributions.empirical_distribution import ECDF</span>

<span class="c1"># logging.basicConfig(format=&#39;%(asctime)s : %(levelname)s : %(message)s&#39;, level=logging.INFO)</span>
<span class="c1"># logger = logging.getLogger(&#39;&#39;)</span>

<span class="n">quick_setup</span><span class="p">()</span>
<span class="n">logger</span><span class="o">=</span> <span class="n">log</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;lossmodel&#39;</span><span class="p">)</span>

<span class="c1">## Actual</span>
<span class="k">class</span> <span class="nc">Frequency</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class computes the frequency underlying the collective risk model.</span>

<span class="sd">    :param \**kwargs:</span>
<span class="sd">    See below</span>

<span class="sd">    :Keyword Arguments:</span>
<span class="sd">        * *fdist* (``str``) --</span>
<span class="sd">          Name of the frequency distribution. See the distribution module for the discrete distributions supported in GEMAct.</span>
<span class="sd">        * *fpar* (``dict``) --</span>
<span class="sd">          parameters of the frequency distribution.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="c1">## initializing the attribute</span>
        <span class="c1"># self.stv=structureVar</span>
        <span class="c1"># self.stvpar=svpar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fdist&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;fpar&#39;</span><span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;The frequency distribution is not parametrized correctly </span><span class="se">\n</span><span class="s2"> See our documentation: https://gem-analytics.github.io/gemact/&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;ZMpoisson&#39;</span><span class="p">,</span><span class="s1">&#39;ZMbinom&#39;</span><span class="p">,</span><span class="s1">&#39;ZMgeom&#39;</span><span class="p">,</span><span class="s1">&#39;ZMnbinom&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p0</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p0</span><span class="o">=</span><span class="kc">None</span>
    <span class="c1">#</span>
    <span class="c1">#</span>
    <span class="c1"># @property</span>
    <span class="c1"># def stvpar(self):</span>
    <span class="c1">#     return self.__stvpar</span>
    <span class="c1">#</span>
    <span class="c1"># @stvpar.setter</span>
    <span class="c1"># def stvpar(self, var):</span>
    <span class="c1">#     if not var is None:</span>
    <span class="c1">#         assert isinstance(var,dict), logger.error(&#39;The structure variable distribution parameters must be given as a dictionary&#39;)</span>
    <span class="c1">#     self.__stvpar = var</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fdist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fdist</span>

    <span class="nd">@fdist</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">fdist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="c1">#this is the set of possible distributions</span>
        <span class="n">frdict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;poisson&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">Poisson</span><span class="p">,</span>
                  <span class="s1">&#39;ZTpoisson&#39;</span><span class="p">:</span><span class="n">distributions</span><span class="o">.</span><span class="n">ZTPoisson</span><span class="p">,</span>
                  <span class="s1">&#39;ZMpoisson&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">ZMPoisson</span><span class="p">,</span>
                  <span class="s1">&#39;binom&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">Binom</span><span class="p">,</span>
                  <span class="s1">&#39;ZTbinom&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">ZTBinom</span><span class="p">,</span>
                  <span class="s1">&#39;ZMbinom&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">ZMBinom</span><span class="p">,</span>
                  <span class="s1">&#39;geom&#39;</span><span class="p">:</span><span class="n">distributions</span><span class="o">.</span><span class="n">Geom</span><span class="p">,</span>
                  <span class="s1">&#39;ZTgeom&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">ZTGeom</span><span class="p">,</span>
                  <span class="s1">&#39;ZMgeom&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">ZMGeom</span><span class="p">,</span>
                  <span class="s1">&#39;nbinom&#39;</span><span class="p">:</span><span class="n">distributions</span><span class="o">.</span><span class="n">NegBinom</span><span class="p">,</span>
                  <span class="s1">&#39;ZTnbinom&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">ZTNegBinom</span><span class="p">,</span>
                  <span class="s1">&#39;ZMnbinom&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">ZMNegBinom</span>
                  <span class="p">}</span>

        <span class="k">assert</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">frdict</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> is not supported </span><span class="se">\n</span><span class="s2"> See our documentation: https://gem-analytics.github.io/gemact/&quot;</span> <span class="o">%</span> <span class="n">var</span>
        <span class="c1"># if self.stvpar is None:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__fdist</span> <span class="o">=</span> <span class="n">frdict</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
        <span class="c1"># else:</span>
        <span class="c1"># assert var in [&#39;poisson&#39;,&#39;ZTpoisson&#39;,&#39;ZMpoisson&#39;], logger.error(&#39;Models with structure variable are available only for poisson, ZTpoisson and ZMpoisson distributions&#39;)</span>
        <span class="c1"># if var == &#39;poisson&#39;:</span>
        <span class="c1">#     self.__fdist = frdict[&#39;nbinom&#39;]</span>
        <span class="c1"># elif var == &#39;ZTpoisson&#39;:</span>
        <span class="c1">#     logger.info(</span>
        <span class="c1">#         &quot;The zero-truncation with the presence of a structure variable is applied to the a posteriori model&quot;)</span>
        <span class="c1">#     self.__fdist = frdict[&#39;ZTnbinom&#39;]</span>
        <span class="c1"># elif var == &#39;ZMpoisson&#39;:</span>
        <span class="c1">#     logger.info(</span>
        <span class="c1">#         &quot;The zero-modification with the presence of a structure variable is applied to the a posteriori model&quot;)</span>
        <span class="c1">#     self.__fdist = frdict[&#39;ZMnbinom&#39;]</span>

            <span class="c1">#caso binomiale e geometrica dobbiamo parlare perchè nel caso serve ricavare tutte le relative ab0 o scegliere di non portare</span>
            <span class="c1">#recurrent e fft</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fpar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fpar</span>

    <span class="nd">@fpar</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">fpar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="nb">dict</span><span class="p">),</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;The frequency distribution parameters must be given as a dictionary&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;geom&#39;</span><span class="p">,</span><span class="s1">&#39;ZTgeom&#39;</span><span class="p">,</span><span class="s1">&#39;ZMgeom&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;loc&#39;</span> <span class="ow">in</span> <span class="n">var</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">var</span><span class="p">[</span><span class="s1">&#39;loc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__fpar</span> <span class="o">=</span> <span class="n">var</span>
        <span class="c1"># if self.stvpar is None:</span>
        <span class="c1">#     self.__fpar = var</span>
        <span class="c1"># else:</span>
        <span class="c1">#         if self.fdist in [&#39;poisson&#39;,&#39;ZMpoisson&#39;,&#39;ZTpoisson&#39;]: ## modificato</span>
        <span class="c1">#             try:</span>
        <span class="c1">#                 self.__fpar={&#39;n&#39;:self.stvpar[&#39;a&#39;],&#39;p&#39;:self.stvpar[&#39;scale&#39;]/(1+self.stvpar[&#39;scale&#39;])}</span>
        <span class="c1">#             except:</span>
        <span class="c1">#                 logger.error(&quot;You did not parametrize the distribution correctly. Check the gamma parameters are provided as &#39;a&#39; and &#39;scale&#39;&quot; )</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">p0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__p0</span>

    <span class="nd">@p0</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">p0</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">var</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Converting </span><span class="si">%s</span><span class="s1"> to a float&#39;</span><span class="o">%</span><span class="n">var</span><span class="p">)</span>
                    <span class="n">var</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">var</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">var</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Please provide a value for p0 between 0 and 1&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">var</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;As you provided p0=</span><span class="si">%s</span><span class="s1">, this is equivalent to a Zero-Truncated Poisson&#39;</span><span class="o">%</span><span class="n">var</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__p0</span><span class="o">=</span><span class="n">var</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Please provide p0 as an integer or a float between 0 and 1&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__p0</span> <span class="o">=</span> <span class="n">var</span>

    <span class="c1"># def fgp(self,f,a=0,b=0):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     It computes the probability generating function of the discrete distribution given the (a,b,1) parametrization.</span>
    <span class="c1">#</span>
    <span class="c1">#     :param f: argument of the probability generating function.</span>
    <span class="c1">#               It will be severity discrete distribution when computing the collective risk model.</span>
    <span class="c1">#     :type f: numpy.ndarray</span>
    <span class="c1">#     :param a: a parameter of the distribution.</span>
    <span class="c1">#     :param b: b parameter of the distribution.</span>
    <span class="c1">#     :return: probability generated in f.</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#</span>
    <span class="c1">#     if self.fdist.name == &#39;poisson&#39;:</span>
    <span class="c1">#         return np.exp(b*(f-1))</span>
    <span class="c1">#     if self.fdist.name== &#39;ZTpoisson&#39;:</span>
    <span class="c1">#         return (np.exp(b*f)-1)/(np.exp(b)-1)</span>
    <span class="c1">#     if self.fdist.name== &#39;ZMpoisson&#39;:</span>
    <span class="c1">#         return self.p0+(1-self.p0)*((np.exp(b*f)-1)/(np.exp(b)-1))</span>
    <span class="c1">#</span>
    <span class="c1">#     if self.fdist.name ==&#39;binom&#39;:</span>
    <span class="c1">#         return (1+a/(a-1)*(f-1))**(-b/a-1)</span>
    <span class="c1">#     if self.fdist.name ==&#39;ZTbinom&#39;:</span>
    <span class="c1">#         return ((1+a/(a-1)*(f-1))**(-b/a-1)-(1-a)**(b/a+1))/(1-(1-a)**(b/a+1))</span>
    <span class="c1">#     if self.fdist.name== &#39;ZMbinom&#39;:</span>
    <span class="c1">#         return self.p0+(1-self.p0)*((1+a/(a-1)*(f-1))**(-b/a-1)-(1-a)**(b/a+1))/(1-(1-a)**(b/a+1))</span>
    <span class="c1">#</span>
    <span class="c1">#     if self.fdist.name ==&#39;geom&#39;:</span>
    <span class="c1">#         return (1-a/(1-a)*(f-1))**(-1)</span>
    <span class="c1">#     if self.fdist.name ==&#39;ZTgeom&#39;:</span>
    <span class="c1">#         return (1/(1-(f-1)/(1-a))-1+a)/a</span>
    <span class="c1">#     if self.fdist.name == &#39;ZMgeom&#39;:</span>
    <span class="c1">#         return self.p0+(1-self.p0)*(1/(1-(f-1)/(1-a))-1+a)/a</span>
    <span class="c1">#</span>
    <span class="c1">#     if self.fdist.name ==&#39;nbinom&#39;:</span>
    <span class="c1">#         return (1-a/(1-a)*(f-1))**(-b/a-1)</span>
    <span class="c1">#     if self.fdist.name ==&#39;ZTnbinom&#39;:</span>
    <span class="c1">#         return ((1/(1-(f-1)*a/(1-a)))**(b/a+1)-(1-a)**(b/a+1))/(1-(1-a)**(b/a+1))</span>
    <span class="c1">#     if self.fdist.name == &#39;ZMnbinom&#39;:</span>
    <span class="c1">#         return self.p0+(1-self.p0)*((1/(1-(f-1)*a/(1-a)))**(b/a+1)-(1-a)**(b/a+1))/(1-(1-a)**(b/a+1))</span>

    <span class="k">def</span> <span class="nf">abp0g0</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        It returns the parameters of the discrete distribution according to the (a,b,k) parametrization,</span>
<span class="sd">        the probability generating function computed in zero given the discrete severity fj,</span>
<span class="sd">        and the probability of the distribution in zero.</span>

<span class="sd">        :param fj: discretized severity distribution probabilities.</span>
<span class="sd">        :type fj: numpy.ndarray</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">p0</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fq</span><span class="o">.</span><span class="n">abk</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">p0</span><span class="p">,[</span><span class="bp">self</span><span class="o">.</span><span class="n">fq</span><span class="o">.</span><span class="n">pgf</span><span class="p">(</span><span class="n">fj</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>

        <span class="c1"># if self.fdist.name in [&#39;poisson&#39;, &#39;binom&#39;, &#39;geom&#39;, &#39;nbinom&#39;] and (self.p0 is not None):</span>
        <span class="c1">#     logger.info(</span>
        <span class="c1">#         &quot;The parameter p0 is arbitrary only for Zero-Modified distributions. \n See our documentation: https://UnGiornoCiFacciamoPureIlSito.html &quot;)</span>
        <span class="c1">#</span>
        <span class="c1"># # it returns a,b, p0,g</span>
        <span class="c1"># if self.fdist.name == &#39;poisson&#39;:</span>
        <span class="c1">#     return 0, \</span>
        <span class="c1">#            self.fpar[&#39;mu&#39;], \</span>
        <span class="c1">#             np.array(np.exp(-self.fpar[&#39;mu&#39;])),\</span>
        <span class="c1">#            [self.fgp(f=fj[0],a=0,b=self.fpar[&#39;mu&#39;])]</span>
        <span class="c1">#</span>
        <span class="c1"># if self.fdist.name == &#39;ZTpoisson&#39;:</span>
        <span class="c1">#     return 0, \</span>
        <span class="c1">#            self.fpar[&#39;mu&#39;], \</span>
        <span class="c1">#            0,\</span>
        <span class="c1">#            [self.fgp(f=fj[0],a=0,b=self.fpar[&#39;mu&#39;])]</span>
        <span class="c1">#</span>
        <span class="c1"># if self.fdist.name == &#39;ZMpoisson&#39;:</span>
        <span class="c1">#     return 0, \</span>
        <span class="c1">#            self.fpar[&#39;mu&#39;], \</span>
        <span class="c1">#            self.p0, \</span>
        <span class="c1">#            [self.fgp(f=fj[0],a=0,b=self.fpar[&#39;mu&#39;])]</span>
        <span class="c1">#</span>
        <span class="c1"># if self.fdist.name == &#39;binom&#39;:</span>
        <span class="c1">#     return -self.fpar[&#39;p&#39;]/(1-self.fpar[&#39;p&#39;]), \</span>
        <span class="c1">#            (self.fpar[&#39;n&#39;]+1)*(self.fpar[&#39;p&#39;]/(1-self.fpar[&#39;p&#39;])),\</span>
        <span class="c1">#            (1-self.fpar[&#39;p&#39;])**self.fpar[&#39;n&#39;],\</span>
        <span class="c1">#            [self.fgp(f=fj[0],a=-self.fpar[&#39;p&#39;]/(1-self.fpar[&#39;p&#39;]),b=(self.fpar[&#39;n&#39;]+1)*(self.fpar[&#39;p&#39;]/(1-self.fpar[&#39;p&#39;])))]</span>
        <span class="c1">#</span>
        <span class="c1"># if self.fdist.name == &#39;ZTbinom&#39;:</span>
        <span class="c1">#     return -self.fpar[&#39;p&#39;] / (1 - self.fpar[&#39;p&#39;]), \</span>
        <span class="c1">#            (self.fpar[&#39;n&#39;] + 1) * (self.fpar[&#39;p&#39;] / (1 - self.fpar[&#39;p&#39;])), \</span>
        <span class="c1">#            0,\</span>
        <span class="c1">#            [self.fgp(f=fj[0],a=-self.fpar[&#39;p&#39;]/(1-self.fpar[&#39;p&#39;]),b=(self.fpar[&#39;n&#39;]+1)*(self.fpar[&#39;p&#39;]/(1-self.fpar[&#39;p&#39;])))]</span>
        <span class="c1">#</span>
        <span class="c1"># if self.fdist.name == &#39;ZMbinom&#39;:</span>
        <span class="c1">#     return -self.fpar[&#39;p&#39;] / (1 - self.fpar[&#39;p&#39;]), \</span>
        <span class="c1">#            (self.fpar[&#39;n&#39;] + 1) * (self.fpar[&#39;p&#39;] / (1 - self.fpar[&#39;p&#39;])), \</span>
        <span class="c1">#            self.p0,\</span>
        <span class="c1">#            [self.fgp(f=fj[0],a=-self.fpar[&#39;p&#39;]/(1-self.fpar[&#39;p&#39;]),b=(self.fpar[&#39;n&#39;]+1)*(self.fpar[&#39;p&#39;]/(1-self.fpar[&#39;p&#39;])))]</span>
        <span class="c1">#</span>
        <span class="c1"># if self.fdist.name == &#39;geom&#39;:</span>
        <span class="c1">#     return 1-self.fpar[&#39;p&#39;], \</span>
        <span class="c1">#            0,\</span>
        <span class="c1">#            np.array([((1-self.fpar[&#39;p&#39;])/self.fpar[&#39;p&#39;])**-1]), \</span>
        <span class="c1">#            [self.fgp(f=fj[0], a=1-self.fpar[&#39;p&#39;],b=0)]</span>
        <span class="c1">#</span>
        <span class="c1"># if self.fdist.name == &#39;ZTgeom&#39;:</span>
        <span class="c1">#     return 1-self.fpar[&#39;p&#39;], \</span>
        <span class="c1">#            0,\</span>
        <span class="c1">#            np.array([0]),\</span>
        <span class="c1">#            [self.fgp(f=fj[0], a=1-self.fpar[&#39;p&#39;],b=0)]</span>
        <span class="c1">#</span>
        <span class="c1"># if self.fdist.name == &#39;ZMgeom&#39;:</span>
        <span class="c1">#     return 1-self.fpar[&#39;p&#39;], \</span>
        <span class="c1">#            0, \</span>
        <span class="c1">#            np.array([self.p0]), \</span>
        <span class="c1">#            [self.fgp(f=fj[0], a=1-self.fpar[&#39;p&#39;],b=0)]</span>
        <span class="c1">#</span>
        <span class="c1"># if self.fdist.name == &#39;nbinom&#39;:</span>
        <span class="c1">#     return 1-self.fpar[&#39;p&#39;], \</span>
        <span class="c1">#            (self.fpar[&#39;n&#39;]-1)*(1-self.fpar[&#39;p&#39;]), \</span>
        <span class="c1">#            np.array([self.fpar[&#39;p&#39;]**self.fpar[&#39;n&#39;]]), \</span>
        <span class="c1">#            [self.fgp(f=fj[0], a=1-self.fpar[&#39;p&#39;],b=(self.fpar[&#39;n&#39;]-1)*(1-self.fpar[&#39;p&#39;]))]</span>
        <span class="c1">#</span>
        <span class="c1"># if self.fdist.name == &#39;ZTnbinom&#39;:</span>
        <span class="c1">#     return 1-self.fpar[&#39;p&#39;], \</span>
        <span class="c1">#            (self.fpar[&#39;n&#39;]-1)*(1-self.fpar[&#39;p&#39;]),\</span>
        <span class="c1">#            np.array([0]), \</span>
        <span class="c1">#            [self.fgp(f=fj[0], a=1 - self.fpar[&#39;p&#39;], b=(self.fpar[&#39;n&#39;] - 1) * (1 - self.fpar[&#39;p&#39;]))]</span>
        <span class="c1">#</span>
        <span class="c1"># if self.fdist.name == &#39;ZMnbinom&#39;:</span>
        <span class="c1">#     return 1-self.fpar[&#39;p&#39;], \</span>
        <span class="c1">#            (self.fpar[&#39;n&#39;]-1)*(1-self.fpar[&#39;p&#39;]),\</span>
        <span class="c1">#            np.array([self.p0]), \</span>
        <span class="c1">#            [self.fgp(f=fj[0], a=1 - self.fpar[&#39;p&#39;], b=(self.fpar[&#39;n&#39;] - 1) * (1 - self.fpar[&#39;p&#39;]))]</span>


<div class="viewcode-block" id="Severity"><a class="viewcode-back" href="../api.html#lossmodel.Severity">[docs]</a><span class="k">class</span> <span class="nc">Severity</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the severity distribution of the underlying collective risk model.</span>

<span class="sd">    :param h: severity discretization step.</span>
<span class="sd">    :type h: ``float``</span>
<span class="sd">    :param m: number of points of the discrete severity.</span>
<span class="sd">    :type m: ``int``</span>
<span class="sd">    :param d: deductible, it is set to zero when not present.</span>
<span class="sd">    :type d: ``int`` or ``float``</span>
<span class="sd">    :param u: upper priority, individual.</span>
<span class="sd">    :type u: ``int`` or ``float``</span>
<span class="sd">    :param \**kwargs:</span>
<span class="sd">        See below</span>

<span class="sd">    :Keyword Arguments:</span>
<span class="sd">        * *sdist* (``str``) --</span>
<span class="sd">          Name of the severity distribution. See the distribution module for the continuous distributions supported in GEMAct.</span>
<span class="sd">        * *spar* (``dict``) --</span>
<span class="sd">          parameters of the severity distribution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="c1">## initializing the attribute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sdist</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;sdist&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spar</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;spar&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="o">=</span><span class="n">d</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">u</span><span class="o">=</span><span class="n">u</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="n">m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">=</span> <span class="n">h</span>

        <span class="k">if</span> <span class="s1">&#39;loc&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">spar</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loc_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">spar</span><span class="p">[</span><span class="s1">&#39;loc&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loc_</span><span class="o">=</span><span class="mf">.0</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sdist</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">spar</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The severity distribution is not parametrized correctly </span><span class="se">\n</span><span class="s2"> See our documentation: https://gem-analytics.github.io/gemact/ &quot;</span><span class="p">)</span>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sdist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sdist</span>

    <span class="nd">@sdist</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">sdist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="c1"># this is the set of possible distributions</span>
        <span class="n">svdict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">Gamma</span><span class="p">,</span>
                  <span class="s1">&#39;lognorm&#39;</span><span class="p">:</span><span class="n">distributions</span><span class="o">.</span><span class="n">Lognormal</span><span class="p">,</span>
                  <span class="s1">&#39;exponential&#39;</span><span class="p">:</span><span class="n">distributions</span><span class="o">.</span><span class="n">Exponential</span><span class="p">,</span>
                  <span class="s1">&#39;genpareto&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">GenPareto</span><span class="p">,</span>
                  <span class="s1">&#39;genbeta&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">GenBeta</span><span class="p">,</span>
                  <span class="s1">&#39;burr12&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">Burr12</span><span class="p">,</span><span class="c1">#}#,</span>
                  <span class="s1">&#39;invgauss&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">InvGauss</span><span class="p">,</span>
                  <span class="s1">&#39;fisk&#39;</span><span class="p">:</span><span class="n">distributions</span><span class="o">.</span><span class="n">Fisk</span><span class="p">,</span>
                  <span class="s1">&#39;dagum&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">Dagum</span><span class="p">,</span>
                  <span class="s1">&#39;invgamma&#39;</span><span class="p">:</span> <span class="n">distributions</span><span class="o">.</span><span class="n">InvGamma</span><span class="p">,</span>
                  <span class="s1">&#39;weibull_min&#39;</span><span class="p">:</span><span class="n">distributions</span><span class="o">.</span><span class="n">Weibull</span><span class="p">,</span>
                  <span class="s1">&#39;invweibull&#39;</span><span class="p">:</span><span class="n">distributions</span><span class="o">.</span><span class="n">InvWeibull</span><span class="p">,</span>
                  <span class="s1">&#39;beta&#39;</span><span class="p">:</span><span class="n">distributions</span><span class="o">.</span><span class="n">Beta</span><span class="p">}</span>
        <span class="k">assert</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">svdict</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> is not supported </span><span class="se">\n</span><span class="s2"> See our documentation: https://gem-analytics.github.io/gemact/ &quot;</span> <span class="o">%</span> <span class="n">var</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__sdist</span> <span class="o">=</span> <span class="n">svdict</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">spar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__spar</span>

    <span class="nd">@spar</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">spar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span> <span class="s1">&#39;The severity distribution parameters must be given as a dictionary&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__spar</span> <span class="o">=</span> <span class="n">var</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__d</span>

    <span class="nd">@d</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">var</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;The lower priority for the severity must be higher or equal to zero&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__d</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">u</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__u</span>

    <span class="nd">@u</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">u</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">var</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;The upper priority for the severity strictly positive&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__u</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">m</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__m</span>

    <span class="nd">@m</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">var</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__m</span> <span class="o">=</span> <span class="n">var</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">var</span><span class="p">)):</span>
                    <span class="k">assert</span> <span class="n">var</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Please specify the severity nodes as a postive integer&#39;</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;I turned the nodes you gave me into an integer&#39;</span><span class="p">)</span>
                    <span class="n">out</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">var</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">u</span><span class="o">==</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">__m</span><span class="o">=</span><span class="n">out</span>
                <span class="k">else</span><span class="p">:</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">__m</span> <span class="o">=</span> <span class="n">out</span><span class="o">-</span><span class="mi">1</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Please specify the severity nodes as a postive integer&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__h</span>

    <span class="nd">@h</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">var</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">),</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;You provided the severity number of nodes, please provide a value for h&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__h</span> <span class="o">=</span> <span class="n">var</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">u</span> <span class="o">!=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;As you specified an upper priority for the severity distribution, h is set to (u-d)/m&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__h</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">u</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span><span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="n">var</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;The discretization step must be set to a positive float&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__h</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>

<div class="viewcode-block" id="Severity.massDispersal"><a class="viewcode-back" href="../api.html#lossmodel.Severity.massDispersal">[docs]</a>    <span class="k">def</span> <span class="nf">massDispersal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Severity discretization according to the mass dispersal method.</span>

<span class="sd">        :return: discrete severity</span>
<span class="sd">        :rtype: ``numpy.ndarray``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">f0</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">))</span>
        <span class="n">seq_</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">)</span><span class="o">+</span><span class="mf">.5</span>
        <span class="n">fj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f0</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">+</span> <span class="n">seq_</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">+</span> <span class="n">seq_</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span>
                    <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">u</span> <span class="o">!=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
            <span class="n">fj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fj</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">u</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)))</span>

        <span class="n">seq</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">loc_</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">u</span><span class="o">!=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
            <span class="n">seq</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">seq</span><span class="p">,[</span><span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">]))</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;fj&#39;</span><span class="p">:</span><span class="n">fj</span><span class="p">,</span><span class="s1">&#39;severity_seq&#39;</span><span class="p">:</span><span class="n">seq</span><span class="p">}</span></div>

    <span class="k">def</span> <span class="nf">__umhoverd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper for the local moments discretization.</span>
<span class="sd">        In case an upper priority on the severity is placed, the last point of the sequence is adjusted by this method.</span>

<span class="sd">        :return: probability mass in (u-d/h)*m</span>
<span class="sd">        :rtype: ``numpy.ndarray``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">u</span> <span class="o">==</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">lev</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">u</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc_</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">lev</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">u</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc_</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">den</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span><span class="n">loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">loc_</span><span class="p">))</span>


<div class="viewcode-block" id="Severity.localMoments"><a class="viewcode-back" href="../api.html#lossmodel.Severity.localMoments">[docs]</a>    <span class="k">def</span> <span class="nf">localMoments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Severity discretization according to the local moments method.</span>

<span class="sd">        :return: discrete severity.</span>
<span class="sd">        :rtype: ``numpy.ndarray``</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__umhoverd</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">lev</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc_</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">lev</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc_</span><span class="p">)</span>
        <span class="n">den</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">den</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">,</span><span class="n">loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">loc_</span><span class="p">)</span>
        <span class="n">nj</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">lev</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc_</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">lev</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc_</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">lev</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc_</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">)</span>

        <span class="c1">## keep the following two lines outside the if cycles</span>
        <span class="n">fj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">n</span> <span class="o">/</span> <span class="n">den</span><span class="p">,</span> <span class="n">nj</span> <span class="o">/</span> <span class="n">den</span><span class="p">)</span>

        <span class="n">seq</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">loc_</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">u</span><span class="o">!=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
            <span class="n">seq</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">seq</span><span class="p">,[</span><span class="n">seq</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="p">]))</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;fj&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fj</span><span class="p">,</span> <span class="n">v_</span><span class="p">),</span> <span class="s1">&#39;severity_seq&#39;</span><span class="p">:</span> <span class="n">seq</span><span class="p">}</span></div></div>


<div class="viewcode-block" id="LossModel"><a class="viewcode-back" href="../api.html#lossmodel.LossModel">[docs]</a><span class="k">class</span> <span class="nc">LossModel</span><span class="p">(</span><span class="n">Frequency</span><span class="p">,</span><span class="n">Severity</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    It computes the collective risk model given the frequency and severity assumptions.</span>
<span class="sd">    It allows for (re)insurance pricing and risk modeling.</span>

<span class="sd">    :param method: computational method for the aggregate cost. Available choices are Fast Fourier Transform (&#39;fft&#39;), recursive method (&#39;recursive&#39;) and Monte Carlo simulation (&#39;mcsimulation&#39;).</span>
<span class="sd">    :type method: ``str``</span>
<span class="sd">    :param nsim: number of simulations, MC.</span>
<span class="sd">    :type nsim: ``int``</span>
<span class="sd">    :param tilt: whether tilting is present or not when computing the discrete Fourier transform.</span>
<span class="sd">    :type tilt: ``bool`` or ``float``</span>
<span class="sd">    :param setseed: seed parameter for MC.</span>
<span class="sd">    :type setseed: ``int``</span>
<span class="sd">    :param discretizationmethod:  discretization method for the severity. Default is &#39;localmoments&#39;.</span>
<span class="sd">    :type discretizationmethod: ``str``</span>
<span class="sd">    :param n: number of final points in the aggregate cost sequence.</span>
<span class="sd">    :type n: ``int``</span>
<span class="sd">    :param L: stop loss priority.</span>
<span class="sd">    :type L: ``float``</span>
<span class="sd">    :param K: number of reinstatements layers.</span>
<span class="sd">    :type K: ``float``</span>
<span class="sd">    :param c: reinstatements layers loading.</span>
<span class="sd">    :type c: ``float``</span>
<span class="sd">    :param alphaqs: quota share.</span>
<span class="sd">    :type alphaqs: ``float``</span>

<span class="sd">    Inherits from Frequency:</span>

<span class="sd">    :param fdist: name of the frequency distribution. See the distributions module for the discrete distributions supported in GEMAct.</span>
<span class="sd">    :type fdist: ``str``</span>
<span class="sd">    :param fpar: parameters of the frequency distribution.</span>
<span class="sd">    :type fpar: ``dict``</span>

<span class="sd">    Inherits from Severity:</span>

<span class="sd">    :param h: severity discretization step.</span>
<span class="sd">    :type h: ``float``</span>
<span class="sd">    :param m: number of points of the discrete severity.</span>
<span class="sd">    :type m: ``int``</span>
<span class="sd">    :param d: deductible, it is set to zero when not present.</span>
<span class="sd">    :type d: ``int`` or ``float``</span>
<span class="sd">    :param u: upper priority, individual.</span>
<span class="sd">    :type u: ``int`` or ``float``</span>
<span class="sd">    :param sdist: name of the severity distribution. See the distribution module for the continuous distributions supported in GEMAct.</span>
<span class="sd">    :type sdist: ``str``</span>
<span class="sd">    :param spar: parameters of the severity distribution.</span>
<span class="sd">    :type spar: ``dict``</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">nsim</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span>
                 <span class="n">tilt</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">setseed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
                 <span class="n">discretizationmethod</span> <span class="o">=</span> <span class="s1">&#39;localmoments&#39;</span><span class="p">,</span>
                 <span class="n">n</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">L</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                 <span class="n">K</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),</span>
                 <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                 <span class="n">alphaqs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">Frequency</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">Severity</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__nu</span> <span class="o">=</span> <span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mf">0.</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__franchise</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nsim</span> <span class="o">=</span> <span class="n">nsim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setseed</span> <span class="o">=</span> <span class="n">setseed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discretizationmethod</span> <span class="o">=</span> <span class="n">discretizationmethod</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tilt</span> <span class="o">=</span> <span class="n">tilt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">L</span><span class="o">=</span><span class="n">L</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">K</span> <span class="o">=</span> <span class="n">K</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">=</span><span class="n">c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alphaqs</span><span class="o">=</span><span class="n">alphaqs</span>
        <span class="c1">#filled attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lossModelComputation</span><span class="p">()</span>


        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;mcsimulation&#39;</span><span class="p">]:</span> <span class="c1">#,&#39;qmcsimulation&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__algtype</span><span class="o">=</span><span class="s1">&#39;simulative&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__algtype</span> <span class="o">=</span> <span class="s1">&#39;notsimulative&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__method</span>

    <span class="nd">@method</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">var</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__method</span> <span class="o">=</span> <span class="s1">&#39;mcsimulation&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not a string&#39;</span> <span class="o">%</span><span class="n">var</span>
            <span class="k">assert</span> <span class="n">var</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;mcsimulation&#39;</span><span class="p">,</span><span class="s1">&#39;recursive&#39;</span><span class="p">,</span><span class="s1">&#39;fft&#39;</span><span class="p">],</span> <span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> is not supported in our package </span><span class="se">\n</span><span class="s2"> See our documentation: https://gem-analytics.github.io/gemact/&quot;</span> <span class="o">%</span> <span class="n">var</span>
            <span class="c1"># ,&#39;qmcsimulation&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">var</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">var</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;What did you mean with </span><span class="si">%r</span><span class="s2">? &#39;method&#39; is set to </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__method</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nsim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__nsim</span>

    <span class="nd">@nsim</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">nsim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">var</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;nsim=</span><span class="si">%r</span><span class="s1"> must be set to an integer&#39;</span> <span class="o">%</span> <span class="n">var</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__nsim</span><span class="o">=</span> <span class="n">var</span>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">setseed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__setseed</span>

    <span class="nd">@setseed</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">setseed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="s1">&#39;setseed=</span><span class="si">%r</span><span class="s1"> must be set to an integer&#39;</span> <span class="o">%</span> <span class="n">var</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__setseed</span> <span class="o">=</span> <span class="n">var</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">discretizationmethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__discretizationmethod</span>

    <span class="nd">@discretizationmethod</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">discretizationmethod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not a string&#39;</span> <span class="o">%</span><span class="n">var</span>
        <span class="k">assert</span> <span class="n">var</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;localmoments&#39;</span><span class="p">,</span><span class="s1">&#39;massdispersal&#39;</span><span class="p">],</span> <span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not a supported discretization method must be&#39;</span> <span class="o">%</span><span class="n">var</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">var</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">var</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;What did you mean with </span><span class="si">%r</span><span class="s2">? &#39;discretizationmethod&#39; is set to </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">var</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__discretizationmethod</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">n</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__n</span>

    <span class="nd">@n</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">n</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">var</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__n</span> <span class="o">=</span> <span class="n">var</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">var</span><span class="p">)):</span>
                    <span class="k">assert</span> <span class="n">var</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Please specify the aggregate model nodes as a postive integer&#39;</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;I turned the nodes you gave me into an integer&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__n</span> <span class="o">=</span> <span class="n">var</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Please specify the aggregate model nodes as a postive integer&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tilt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tilt</span>

    <span class="nd">@tilt</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">tilt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="nb">bool</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__tilt</span> <span class="o">=</span> <span class="n">var</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__tilt</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">L</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__L</span>

    <span class="nd">@L</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">L</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="nb">print</span><span class="p">(</span>
            <span class="s1">&#39;Please provide the aggregate priority as a float or an integer&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">var</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The aggregate priority must be positive&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__L</span> <span class="o">=</span> <span class="n">var</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">K</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__K</span>

    <span class="nd">@K</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">K</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="nb">print</span><span class="p">(</span>
            <span class="s1">&#39;Please provide the number of reinstatements as a positive float or a positive integer&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">var</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The aggregate priority must be positive&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__K</span> <span class="o">=</span> <span class="n">var</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__c</span>

    <span class="nd">@c</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">c</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">assert</span> <span class="n">var</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;The loading for the reinstatement layers must be positive&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">K</span> <span class="o">==</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
                <span class="n">out</span> <span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">K</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">K</span> <span class="o">!=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
                    <span class="k">assert</span> <span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">K</span><span class="p">,</span> <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="s1">&#39;The premium share for the reinstatement layers should be </span><span class="si">%s</span><span class="s1"> dimensional&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">K</span><span class="p">))</span>
                    <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">var</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;The premium share for the reinstatement layers must be positive&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;You specified an array for the layers loading which will be disregarded as: </span><span class="se">\n</span><span class="s2"> K=float(&#39;inf&#39;) is a stop loss contract&quot;</span><span class="p">)</span>
                <span class="n">out</span><span class="o">=</span><span class="n">var</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__c</span> <span class="o">=</span> <span class="n">out</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">alphaqs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__alphaqs</span>

    <span class="nd">@alphaqs</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">alphaqs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="nb">float</span><span class="p">),</span> <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;The retained percentage of the quota share treaty must be an integer or a float&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">var</span> <span class="o">&lt;=</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">var</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span> <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;The retained percentage of the quota share treaty must be in (0,1]&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__alphaqs</span><span class="o">=</span><span class="n">var</span>

<div class="viewcode-block" id="LossModel.lossModelComputation"><a class="viewcode-back" href="../api.html#lossmodel.LossModel.lossModelComputation">[docs]</a>    <span class="k">def</span> <span class="nf">lossModelComputation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        It returns the aggregate cost computed with the proper method.</span>

<span class="sd">        :return: aggregate cost empirical pdf, aggregate cost empirical cdf,aggregate cost values sequence</span>
<span class="sd">        :rtype: ``dict``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;mcsimulation&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__MCsimulation</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;recursive&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__recursive</span><span class="p">()</span>
        <span class="c1"># if self.method == &#39;qmcsimulation&#39;:</span>
        <span class="c1">#     return self.__QMCsimulation()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;fft&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fft</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">__franchise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Frequency parameters correction in case of franchise.</span>

<span class="sd">        :return: correct frequency parameters.</span>
<span class="sd">        :rtype: ``dict``</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;poisson&#39;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ZTpoisson&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;mu&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;mu&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ZMpoisson&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;mu&#39;</span><span class="p">])</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;mu&#39;</span><span class="p">])</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;mu&#39;</span><span class="p">]))</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;mu&#39;</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;mu&#39;</span><span class="p">]</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;mu&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;binom&#39;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ZTbinom&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ZMbinom&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">])</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">])</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">])</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">])</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;geom&#39;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ZTgeom&#39;</span><span class="p">:</span>
            <span class="n">beta</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">])</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="n">beta</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ZMgeom&#39;</span><span class="p">:</span>
            <span class="n">beta</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">])</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">beta</span><span class="p">)</span><span class="o">**-</span><span class="mi">1</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="n">beta</span><span class="p">)</span><span class="o">**-</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="n">beta</span><span class="p">)</span><span class="o">**-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">beta</span><span class="p">)</span><span class="o">**-</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="n">beta</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;nbinom&#39;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ZTnbinom&#39;</span><span class="p">:</span>
            <span class="n">beta</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">])</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="n">beta</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdist</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;ZMnbinom&#39;</span><span class="p">:</span>
            <span class="n">beta</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">])</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">beta</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">])</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="n">beta</span><span class="p">)</span><span class="o">**-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p0M&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="n">beta</span><span class="p">)</span><span class="o">**-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">beta</span><span class="p">)</span><span class="o">**-</span><span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fpar</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">__nu</span><span class="o">*</span><span class="n">beta</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">__fft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tiltingp</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Aggregate cost computation according to discrete Fourier transform via the fast Fourier transform computation.</span>

<span class="sd">        :param tiltingp: tilting parameter is set to zero and corrected in case the user chooses a different specification.</span>
<span class="sd">        :type tiltingp: ``bool`` or ``float``</span>
<span class="sd">        :return: aggregate cost empirical pdf, aggregate cost empirical cdf,aggregate cost values sequence</span>
<span class="sd">        :rtype: ``dict``</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;..Computing the distribution via FFT..&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">discretizationmethod</span> <span class="o">==</span> <span class="s1">&#39;localmoments&#39;</span><span class="p">:</span>
            <span class="n">sevdict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">localMoments</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sevdict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">massDispersal</span><span class="p">()</span>

        <span class="n">fj</span><span class="o">=</span><span class="n">sevdict</span><span class="p">[</span><span class="s1">&#39;fj&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tilt</span><span class="p">,</span><span class="nb">bool</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tilt</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">tiltingp</span><span class="o">=</span><span class="mi">20</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tiltingp</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tilt</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">u</span> <span class="o">==</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
            <span class="n">fj</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fj</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fj</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>

        <span class="n">f_hat</span><span class="o">=</span><span class="n">fft</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">tiltingp</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span><span class="o">*</span><span class="n">fj</span><span class="p">)</span>
        <span class="n">g_hat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fq</span><span class="o">.</span><span class="n">pgf</span><span class="p">(</span><span class="n">f</span><span class="o">=</span><span class="n">f_hat</span><span class="p">)</span><span class="c1">#self.fgp(f=f_hat,a=a,b=b)</span>
        <span class="n">g</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">tiltingp</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">ifft</span><span class="p">(</span><span class="n">g_hat</span><span class="p">))</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;..Distribution via FFT completed..&#39;</span><span class="p">)</span>

        <span class="k">return</span><span class="p">{</span><span class="s1">&#39;epdf&#39;</span><span class="p">:</span> <span class="n">g</span><span class="p">,</span>
               <span class="s1">&#39;ecdf&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">g</span><span class="p">),</span>
               <span class="s1">&#39;sequence&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">)}</span>

    <span class="k">def</span> <span class="nf">__recursive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Aggregate cost computation via the Panjer recursion.</span>

<span class="sd">        :return: aggregate cost empirical pdf, aggregate cost empirical cdf,aggregate cost values sequence</span>
<span class="sd">        :rtype: ``dict``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;..Computing the recursive distribution..&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">discretizationmethod</span> <span class="o">==</span> <span class="s1">&#39;localmoments&#39;</span><span class="p">:</span>
            <span class="n">sevdict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">localMoments</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sevdict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">massDispersal</span><span class="p">()</span>

        <span class="n">fj</span><span class="o">=</span><span class="n">sevdict</span><span class="p">[</span><span class="s1">&#39;fj&#39;</span><span class="p">]</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">abp0g0</span><span class="p">(</span><span class="n">fj</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">u</span> <span class="o">==</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
            <span class="n">fj</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fj</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fj</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">):</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">fj</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">a</span> <span class="o">*</span> <span class="n">fj</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">*</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">fq</span><span class="o">.</span><span class="n">pmf</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span><span class="o">*</span><span class="n">p0</span><span class="p">)</span><span class="o">*</span><span class="n">fj</span><span class="p">[</span><span class="n">z</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(((</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">z</span> <span class="o">/</span> <span class="n">j</span><span class="p">)</span> <span class="o">*</span> <span class="n">fj</span><span class="p">[</span><span class="n">z</span><span class="p">]</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">g</span><span class="p">)[:</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)]))))</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;..Recursive distribution completed..&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;epdf&#39;</span><span class="p">:</span><span class="n">g</span><span class="p">,</span>
                <span class="s1">&#39;ecdf&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">g</span><span class="p">),</span>
                <span class="s1">&#39;sequence&#39;</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">h</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">)}</span>

    <span class="k">def</span> <span class="nf">__MCsimulation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Aggregate cost computation according to the Monte Carlo simulation.</span>

<span class="sd">        :return: aggregate cost empirical pdf, aggregate cost empirical cdf,aggregate cost simulated values.</span>
<span class="sd">        :rtype: ``dict``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;..Simulating the aggregate distribution..&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mf">1e-05</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="mf">0.</span>

        <span class="n">fqsample</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fq</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nsim</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">setseed</span><span class="p">)</span>
        <span class="n">svsample</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">fqsample</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">p0</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">nsim</span><span class="p">)),</span> <span class="n">random_state</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">setseed</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">&gt;</span> <span class="mf">1e-05</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">setseed</span><span class="p">)</span>
            <span class="n">svsample</span> <span class="o">=</span> <span class="n">svsample</span><span class="p">[</span><span class="n">svsample</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">]</span>
            <span class="k">while</span> <span class="n">svsample</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">nsim</span><span class="p">:</span>
                <span class="n">n0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">p0</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nsim</span> <span class="o">-</span> <span class="n">svsample</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="n">svsample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">svsample</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sv</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">n0</span><span class="p">))))</span>
                <span class="n">svsample</span> <span class="o">=</span> <span class="n">svsample</span><span class="p">[</span><span class="n">svsample</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">]</span>
            <span class="n">svsample</span> <span class="o">=</span> <span class="n">svsample</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">u</span> <span class="o">&lt;</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
            <span class="n">svsample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">svsample</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">u</span><span class="p">)</span>

        <span class="n">cs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">fqsample</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">fqsample</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">xsim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xsim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">svsample</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">cs</span><span class="p">[</span><span class="mi">0</span><span class="p">]])])</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nsim</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">cs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">cs</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
                <span class="c1"># xsim.append(0)</span>
                <span class="n">xsim</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">xsim</span><span class="p">,[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># xsim.append(np.sum(svsample[cs[i]:cs[i + 1]]))</span>
                <span class="n">xsim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">xsim</span><span class="p">,</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">svsample</span><span class="p">[</span><span class="n">cs</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">cs</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]])]))</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;..Simulation completed..&#39;</span><span class="p">)</span>

        <span class="n">x_</span><span class="p">,</span><span class="n">ecdf</span> <span class="o">=</span> <span class="n">hfns</span><span class="o">.</span><span class="n">ecdf</span><span class="p">(</span><span class="n">xsim</span><span class="p">)</span>
        <span class="n">epdf</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">nsim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nsim</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;epdf&#39;</span><span class="p">:</span> <span class="n">epdf</span><span class="p">,</span>
                <span class="s1">&#39;ecdf&#39;</span><span class="p">:</span><span class="n">ecdf</span><span class="p">,</span>
                <span class="s1">&#39;sequence&#39;</span><span class="p">:</span><span class="n">x_</span><span class="p">}</span>

<div class="viewcode-block" id="LossModel.empiricalmoments"><a class="viewcode-back" href="../api.html#lossmodel.LossModel.empiricalmoments">[docs]</a>    <span class="k">def</span> <span class="nf">empiricalmoments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">central</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Empirical moments computed on the aggregate cost.</span>

<span class="sd">        :param central: whether the moment is central or not.</span>
<span class="sd">        :type central: ``bool``</span>
<span class="sd">        :param order: order of the moment</span>
<span class="sd">        :type order: ``int``</span>
<span class="sd">        :return: emprical moment.</span>
<span class="sd">        :rtype: ``numpy.float64``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">central</span><span class="p">,</span><span class="nb">bool</span><span class="p">),</span><span class="s1">&#39;The parameter central must be either True or False&#39;</span>
        <span class="k">assert</span> <span class="n">order</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span><span class="s1">&#39;The parameter order must be a positive integer&#39;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">order</span><span class="p">,</span><span class="nb">int</span><span class="p">),</span> <span class="s1">&#39;The parameter order must be a positive integer&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__algtype</span><span class="o">==</span><span class="s1">&#39;notsimulative&#39;</span><span class="p">:</span>
            <span class="n">lmmean</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;epdf&#39;</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;sequence&#39;</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;epdf&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;sequence&#39;</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">central</span><span class="o">*</span><span class="n">lmmean</span><span class="p">))</span><span class="o">**</span><span class="n">order</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;sequence&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">central</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;sequence&#39;</span><span class="p">]))</span><span class="o">**</span><span class="n">order</span><span class="p">)</span></div>

<div class="viewcode-block" id="LossModel.ppf"><a class="viewcode-back" href="../api.html#lossmodel.LossModel.ppf">[docs]</a>    <span class="k">def</span> <span class="nf">ppf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">probs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Quantiles of the aggregate cost distribution computed in probs.</span>

<span class="sd">        :param probs: vector of probabilities.</span>
<span class="sd">        :type probs: ``float`` or ``numpy.ndarray``</span>
<span class="sd">        :return: vector of quantiles.</span>
<span class="sd">        :rtype: ``numpy.ndarray``</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__algtype</span> <span class="o">==</span> <span class="s1">&#39;notsimulative&#39;</span><span class="p">:</span>
                <span class="n">q</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
                <span class="n">probs</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">probs</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">probs</span><span class="p">:</span>
                    <span class="n">q</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">q</span><span class="p">,[</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;sequence&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;ecdf&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span>
                <span class="k">return</span> <span class="n">q</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;sequence&#39;</span><span class="p">],</span><span class="n">q</span><span class="o">=</span><span class="n">probs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Please provide the values for the quantiles in a list&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="LossModel.plot"><a class="viewcode-back" href="../api.html#lossmodel.LossModel.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quantiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.995</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot of the aggregate cost empirical cdf and the aggregate cost empirical pdf.</span>
<span class="sd">        Quantiles are added to both plots.</span>

<span class="sd">        :param quantiles: probabilities in which to compute the quantiles.</span>

<span class="sd">        :return: cdf and pdf plots.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;sequence&#39;</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;ecdf&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span> <span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> ecdf&#39;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">empiricalmoments</span><span class="p">(),</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="n">quantiles</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">linestyles</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span>
               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> quantiles&#39;</span> <span class="o">%</span><span class="n">quantiles</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;epdf&#39;</span><span class="p">])])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__algtype</span> <span class="o">==</span> <span class="s1">&#39;notsimulative&#39;</span><span class="p">:</span>
            <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;sequence&#39;</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;epdf&#39;</span><span class="p">],</span><span class="n">width</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span> <span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> epdf&#39;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;sequence&#39;</span><span class="p">],</span><span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span> <span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> epdf&#39;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="n">quantiles</span><span class="p">),</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;epdf&#39;</span><span class="p">]),</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">linestyles</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span>
               <span class="n">label</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> quantiles&#39;</span> <span class="o">%</span><span class="n">quantiles</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">empiricalmoments</span><span class="p">(),</span> <span class="n">ymin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
        <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="LossModel.StopLoss"><a class="viewcode-back" href="../api.html#lossmodel.LossModel.StopLoss">[docs]</a>    <span class="k">def</span> <span class="nf">StopLoss</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        It computes the expected value of a stop loss treaty with priority t.</span>

<span class="sd">        :param t: priority.</span>
<span class="sd">        :type t: ``float``</span>
<span class="sd">        :return: expected value of the SL treaty.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">([</span><span class="n">t</span><span class="p">],</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;sequence&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__algtype</span> <span class="o">==</span> <span class="s1">&#39;simulative&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
               <span class="k">return</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lg</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">obs</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">v1_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">lg</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">lg</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">obs</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">lg</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">v1_</span><span class="p">[</span><span class="n">v1_</span> <span class="o">&lt;</span> <span class="mf">1e-6</span><span class="p">]</span> <span class="o">=</span> <span class="mf">.0</span>
                <span class="k">return</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="n">arr</span><span class="o">=</span><span class="n">v1_</span><span class="p">,</span> <span class="n">func1d</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">probs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lossModel</span><span class="p">[</span><span class="s1">&#39;epdf&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
               <span class="k">return</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">probs</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lg</span><span class="o">=</span><span class="n">t</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">obs</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">v1_</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">lg</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">lg</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">obs</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">lg</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">v1_</span><span class="p">[</span><span class="n">v1_</span> <span class="o">&lt;</span> <span class="mf">1e-6</span><span class="p">]</span> <span class="o">=</span> <span class="mf">.0</span> <span class="c1">#svolgo il massimo</span>
                <span class="n">v2_</span><span class="o">=</span><span class="n">v1_</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">probs</span><span class="p">,</span> <span class="n">lg</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">lg</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">return</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span><span class="n">arr</span><span class="o">=</span><span class="n">v2_</span><span class="p">,</span><span class="n">func1d</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="LossModel.Reinstatements"><a class="viewcode-back" href="../api.html#lossmodel.LossModel.Reinstatements">[docs]</a>    <span class="k">def</span> <span class="nf">Reinstatements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reinstatements pricing.</span>

<span class="sd">        :return: final reinstatements pricing.</span>
<span class="sd">        :rtupe: ``numpy.ndarray``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DLK</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">StopLoss</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">L</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">StopLoss</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">L</span><span class="o">+</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">K</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">u</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">K</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span><span class="p">(</span><span class="n">DLK</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lowerk_</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">K</span><span class="p">,</span><span class="n">num</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">K</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">dLk</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">StopLoss</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">L</span><span class="o">+</span><span class="n">lowerk_</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">u</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">StopLoss</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">L</span><span class="o">+</span><span class="n">lowerk_</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">u</span><span class="p">))</span>
            <span class="n">den</span><span class="o">=</span><span class="mi">1</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">dLk</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">u</span>
            <span class="k">return</span><span class="p">(</span><span class="n">DLK</span><span class="o">/</span><span class="n">den</span><span class="p">)</span></div>

<div class="viewcode-block" id="LossModel.Pricing"><a class="viewcode-back" href="../api.html#lossmodel.LossModel.Pricing">[docs]</a>    <span class="k">def</span> <span class="nf">Pricing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        It allows to price contracts with proportional and non-proportional reinsurance.</span>
<span class="sd">        GemAct supports quota share, excess of loss, deductibles, stop-loss and reinstatements.</span>

<span class="sd">        :return: treaty final pricing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#no aggregate conditions</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">K</span> <span class="o">==</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
            <span class="n">P</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">StopLoss</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">L</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">K</span> <span class="o">!=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
            <span class="n">P</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Reinstatements</span><span class="p">()</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="s1">&#39;deductible&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">&#39;priority (severity)&#39;</span><span class="p">,</span><span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">u</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">&#39;priority (aggregate)&#39;</span><span class="p">,</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">L</span><span class="p">],</span>
            <span class="p">[</span><span class="s1">&#39;alpha (qs)&#39;</span><span class="p">,</span><span class="s1">&#39;alphaqs&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alphaqs</span><span class="p">]]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">K</span> <span class="o">!=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">):</span>
            <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="s1">&#39;reinstatements&#39;</span><span class="p">,</span><span class="s1">&#39;K&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">K</span><span class="p">]])</span>

        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;Pure premium&#39;</span><span class="p">,</span><span class="s1">&#39;P&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">alphaqs</span><span class="o">*</span><span class="n">P</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{: &gt;20}</span><span class="s2"> </span><span class="si">{: &gt;20}</span><span class="s2"> </span><span class="si">{: &gt;20}</span><span class="s2"> </span><span class="si">{: &gt;20}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="o">*</span><span class="p">[</span><span class="s1">&#39;Contractual limits&#39;</span><span class="p">,</span><span class="s1">&#39;parameter&#39;</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{: &gt;20}</span><span class="s2"> </span><span class="si">{: &gt;20}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="o">*</span><span class="p">[</span><span class="s2">&quot; ==================================================================&quot;</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{: &gt;20}</span><span class="s2"> </span><span class="si">{: &gt;20}</span><span class="s2"> </span><span class="si">{: &gt;20}</span><span class="s2"> </span><span class="si">{: &gt;20}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">row</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> layers loading c: &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__algtype</span><span class="o">==</span><span class="s1">&#39;simulative&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1"> nsim: &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nsim</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1"> m: &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1"> n: &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span></div></div>







<span class="n">sdist</span> <span class="o">=</span> <span class="s1">&#39;genbeta&#39;</span>
<span class="n">spar</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;shape1&#39;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s1">&#39;shape2&#39;</span> <span class="p">:</span> <span class="mf">.2</span><span class="p">,</span>
        <span class="s1">&#39;shape3&#39;</span> <span class="p">:</span> <span class="mf">.3</span><span class="p">,</span>
        <span class="s1">&#39;scale&#39;</span> <span class="p">:</span> <span class="mf">1.2</span><span class="p">}</span>
<span class="n">fdist</span><span class="o">=</span> <span class="s1">&#39;poisson&#39;</span>
<span class="n">fpar</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;mu&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
<span class="c1">#</span>
<span class="n">pties</span><span class="o">=</span> <span class="n">Severity</span><span class="p">(</span><span class="n">sdist</span><span class="o">=</span><span class="n">sdist</span><span class="p">,</span>
                <span class="n">spar</span><span class="o">=</span><span class="n">spar</span><span class="p">,</span>
                <span class="n">h</span><span class="o">=</span><span class="mf">.01</span><span class="p">,</span>
                <span class="n">m</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e+05</span><span class="p">))</span><span class="o">.</span><span class="n">massDispersal</span><span class="p">()</span>

<span class="n">pties</span><span class="o">=</span> <span class="n">Severity</span><span class="p">(</span><span class="n">sdist</span><span class="o">=</span><span class="n">sdist</span><span class="p">,</span>
                <span class="n">spar</span><span class="o">=</span><span class="n">spar</span><span class="p">,</span>
                <span class="n">h</span><span class="o">=</span><span class="mf">.01</span><span class="p">,</span>
                <span class="n">m</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e+06</span><span class="p">))</span><span class="o">.</span><span class="n">localMoments</span><span class="p">()</span>
<span class="c1">#</span>
<span class="c1"># np.sum(.01*np.arange(0,int(1e+06))*pties[&#39;fj&#39;])</span>
<span class="c1">#</span>
<span class="n">lm_</span><span class="o">=</span><span class="n">LossModel</span><span class="p">(</span>
    <span class="n">sdist</span><span class="o">=</span><span class="n">sdist</span><span class="p">,</span>
    <span class="n">spar</span><span class="o">=</span><span class="n">spar</span><span class="p">,</span>
    <span class="n">fdist</span><span class="o">=</span><span class="n">fdist</span><span class="p">,</span>
    <span class="n">fpar</span><span class="o">=</span><span class="n">fpar</span><span class="p">,</span>
    <span class="n">discretizationmethod</span><span class="o">=</span><span class="s1">&#39;massdispersal&#39;</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s1">&#39;fft&#39;</span><span class="p">,</span>
    <span class="n">m</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e+06</span><span class="p">),</span>
    <span class="n">h</span><span class="o">=</span><span class="mf">.01</span><span class="p">,</span>
    <span class="n">n</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">5e+06</span><span class="p">)</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="s1">&#39;Aggregate cost mean: &#39;</span><span class="p">,</span>
    <span class="n">lm_</span><span class="o">.</span><span class="n">empiricalmoments</span><span class="p">()</span>
<span class="p">)</span>


<span class="n">lm_</span><span class="o">=</span><span class="n">LossModel</span><span class="p">(</span>
    <span class="n">sdist</span><span class="o">=</span><span class="n">sdist</span><span class="p">,</span>
    <span class="n">spar</span><span class="o">=</span><span class="n">spar</span><span class="p">,</span>
    <span class="n">fdist</span><span class="o">=</span><span class="n">fdist</span><span class="p">,</span>
    <span class="n">fpar</span><span class="o">=</span><span class="n">fpar</span><span class="p">,</span>
    <span class="n">discretizationmethod</span><span class="o">=</span><span class="s1">&#39;localmoments&#39;</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s1">&#39;fft&#39;</span><span class="p">,</span>
    <span class="n">m</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e+06</span><span class="p">),</span>
    <span class="n">h</span><span class="o">=</span><span class="mf">.01</span><span class="p">,</span>
    <span class="n">n</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">5e+06</span><span class="p">)</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="s1">&#39;Aggregate cost mean: &#39;</span><span class="p">,</span>
    <span class="n">lm_</span><span class="o">.</span><span class="n">empiricalmoments</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Gabriele Pittarello, Edoardo Luini, Manfred Marvin Marchione<br/>
    
        &copy; Copyright 2022, Gabriele Pittarello, Edoardo Luini, Manfred Marvin Marchione.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>